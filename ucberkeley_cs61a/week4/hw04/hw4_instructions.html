<!DOCTYPE html>
<!-- saved from url=(0051)https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="John DeNero, Albert Chen, Anna (Zhining) Zhu, Cale Horeff, Christopher Le, Colin Schoen, David Harrison, Emily Tsai, Eric Bo, Eric Nelson, Eric Pai, Eurie Oh, Garrett Tan, Giorgia Willits, Haojun Li, Jack Thakar, James Uejio, Jerry Chen, Jongmin Baek, Jordon Wing, Katya Stukalova, Kavi Gupta, Kelly Liu, Kevin Chen, Kevin Lin, Kunal Munshani, Kyle Liang, Kyle Raftogianis, Manas Agrawal, Michael Dong, Michelle Tian, Mitas Ray, Nicole Rasquinha, Owen Jow, Peter Xu, Raymond Chan, Richard Liang, Rohit Lalchandani, Ryan Chang, Samantha Wathugala, Samantha Wong, Shea Conlon, Soumik Biswas, Stanfield Chu, Sydney McMuldroch, Tammy Nguyen, Tim Greeno, Vivian Fang, Zhen Qin">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Homework 4 _ CS 61A Fall 2016_files/jquery.min.js"></script>
    <script src="./Homework 4 _ CS 61A Fall 2016_files/bootstrap.min.js"></script>

    <link rel="stylesheet" href="./Homework 4 _ CS 61A Fall 2016_files/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./Homework 4 _ CS 61A Fall 2016_files/style.css">
    <link rel="icon" href="https://inst.eecs.berkeley.edu/~cs61a/fa16/assets/images/favicon.ico">

    <link rel="stylesheet" href="./Homework 4 _ CS 61A Fall 2016_files/mono-blue.css">
    <script src="./Homework 4 _ CS 61A Fall 2016_files/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    


<link rel="stylesheet" type="text/css" href="./Homework 4 _ CS 61A Fall 2016_files/resource.css">

<link rel="stylesheet" type="text/css" href="./Homework 4 _ CS 61A Fall 2016_files/hw.css">


    <title>
Homework 4 | CS 61A Fall 2016
</title>

  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://inst.eecs.berkeley.edu/~cs61a/fa16/">CS 61A</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/articles/about.html">Syllabus</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/articles/resources.html">Resources</a></li>
            <li><a href="https://piazza.com/berkeley/fall2016/cs61a">Piazza</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/office-hours.html">Office Hours</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/staff.html">Staff</a></li>
            <!--- <li><a href="/~cs61a/fa16/articles/using-ok.html">Using OK</a></li> -->
            <!-- Not used, but leaving these for the future. -->
            <!--- <li><a href="https://inst.eecs.berkeley.edu/~cs61a/admin-sp16/cgi-bin/calnet-auth.cgi">Account Login</a></li> -->
            <!---
            <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Course Info <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="/~cs61a/fa16/articles/resources.html">Resources</a></li>
              <li><a href="/~cs61a/fa16/staff.html">Staff</a></li>
              <li><a href="/~cs61a/fa16/weekly.html">Weekly Schedule</a></li>
            </ul>
            </li>
            -->
          </ul>
        </div>
      </div>
    </nav>

    <div id="content" class="container">
      

<div class="row">
  <div class="col-md-9">
    <div class="page-header">
      <h1>
<span class="content-title-brand">Homework 4</span>
</h1>
    </div>

    
<p><em>Due by 11:59pm on Thursday, 9/22</em></p>




<h2>Instructions</h2>

<p>Download <a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/hw04.zip">hw04.zip</a>.
The vitamin problems can be found in the <code>vitamin</code> directory and the homework
problems can be found in the <code>problems</code> directory. You must run <code>python3 ok
--submit</code> twice: once inside the <code>vitamin</code> directory, and once inside the
<code>problems</code> directory.</p>

<p><strong>Submission:</strong> When you are done, submit with
<code>python3 ok --submit</code>.
You may submit more than once before the deadline; only the final submission
will be scored. Check that you have successfully submitted your code on
<a href="https://okpy.org/">okpy.org</a>.
See <a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/lab/lab00#submitting-assignments">Lab 0</a>
for more instructions on submitting assignments.</p>

<p><strong>Using OK:</strong> If you have any questions about using OK, please
refer to <a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/articles/using-ok.html">this guide.</a>


  </p><p><strong>Readings:</strong> You might find the following references
  useful:</p>
  <ul>
  <li><a href="http://composingprograms.com/pages/17-recursive-functions.html">Section 1.7</a></li>
  <li><a href="http://composingprograms.com/pages/22-data-abstraction.html">Section 2.2</a></li>
</ul>





    
<h2 id="vitamins">Vitamins</h2>


<h3 class="question" id="q1">Question 1: Taxicab Distance</h3>

<p>An intersection in midtown Manhattan can be identified by an avenue and a
street, which are both indexed by positive integers. The <em>Manhattan distance</em> or
<em>taxicab distance</em> between two intersections is the number of blocks that must
be traversed to reach one from the other, ignoring one-way street restrictions
and construction.  For example, <a href="https://goo.gl/maps/LeXMb2vHuAB2">Times Square</a>
is on 46th Street and 7th Avenue.
<a href="https://goo.gl/maps/nM9ecFDD66D2">Ess-a-Bagel</a> is on 51st Street and 3rd
Avenue.   The taxicab distance between them is 9 blocks.</p>

<p>Implement <code>taxicab</code>, which computes the taxicab distance between two
intersections using the following data abstraction. <em>Hint</em>: You don't need to
know what a Cantor pairing function is; just use the abstraction.</p>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">intersection</span><span class="hljs-params">(st, ave)</span>:</span>
    <span class="hljs-string">"""Represent an intersection using the Cantor pairing function."""</span>
    <span class="hljs-keyword">return</span> (st+ave)*(st+ave+<span class="hljs-number">1</span>)//<span class="hljs-number">2</span> + ave

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">street</span><span class="hljs-params">(inter)</span>:</span>
    <span class="hljs-keyword">return</span> w(inter) - avenue(inter)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">avenue</span><span class="hljs-params">(inter)</span>:</span>
    <span class="hljs-keyword">return</span> inter - (w(inter) ** <span class="hljs-number">2</span> + w(inter)) // <span class="hljs-number">2</span>

w = <span class="hljs-keyword">lambda</span> z: int(((<span class="hljs-number">8</span>*z+<span class="hljs-number">1</span>)**<span class="hljs-number">0.5</span>-<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>)

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">taxicab</span><span class="hljs-params">(a, b)</span>:</span>
    <span class="hljs-string">"""Return the taxicab distance between two intersections.

    &gt;&gt;&gt; times_square = intersection(46, 7)
    &gt;&gt;&gt; ess_a_bagel = intersection(51, 3)
    &gt;&gt;&gt; taxicab(times_square, ess_a_bagel)
    9
    &gt;&gt;&gt; taxicab(ess_a_bagel, times_square)
    9
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

<p>Use OK to test your code:</p><pre><code class="nohighlight">python3 ok -q taxicab</code></pre>

<h3 class="question" id="q2">Question 2: Squares only</h3>

<p>Implement the function <code>squares</code>, which takes in a list of positive integers.
It returns a list that contains the square roots of the elements of the original
list that are perfect squares. Try using a list comprehension.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">squares</span><span class="hljs-params">(s)</span>:</span>
    <span class="hljs-string">"""Returns a new list containing square roots of the elements of the
    original list that are perfect squares.

    &gt;&gt;&gt; seq = [8, 49, 8, 9, 2, 1, 100, 102]
    &gt;&gt;&gt; squares(seq)
    [7, 3, 1, 10]
    &gt;&gt;&gt; seq = [500, 30]
    &gt;&gt;&gt; squares(seq)
    []
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<p>Use OK to test your code:</p><pre><code class="nohighlight">python3 ok -q squares</code></pre>


<h2 id="required-questions">Required questions</h2>


<h3 class="question" id="q3">Question 3: G function</h3>

<p>A mathematical function <code>G</code> on positive integers is defined by two
cases:</p>

<pre><code class="hljs bash">G(n) = n,                                       <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">3</span>
G(n) = G(n - <span class="hljs-number">1</span>) + <span class="hljs-number">2</span> * G(n - <span class="hljs-number">2</span>) + <span class="hljs-number">3</span> * G(n - <span class="hljs-number">3</span>),  <span class="hljs-keyword">if</span> n &gt; <span class="hljs-number">3</span></code></pre>

<p>Write a recursive function <code>g</code> that computes <code>G(n)</code>. Then, write an
iterative function <code>g_iter</code> that also computes <code>G(n)</code>:</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">g</span><span class="hljs-params">(n)</span>:</span>
    <span class="hljs-string">"""Return the value of G(n), computed recursively.

    &gt;&gt;&gt; g(1)
    1
    &gt;&gt;&gt; g(2)
    2
    &gt;&gt;&gt; g(3)
    3
    &gt;&gt;&gt; g(4)
    10
    &gt;&gt;&gt; g(5)
    22
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'g', ['While', 'For'])
    True
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">g_iter</span><span class="hljs-params">(n)</span>:</span>
    <span class="hljs-string">"""Return the value of G(n), computed iteratively.

    &gt;&gt;&gt; g_iter(1)
    1
    &gt;&gt;&gt; g_iter(2)
    2
    &gt;&gt;&gt; g_iter(3)
    3
    &gt;&gt;&gt; g_iter(4)
    10
    &gt;&gt;&gt; g_iter(5)
    22
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'g_iter', ['Recursion'])
    True
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<p>Use OK to test your code:</p><pre><code class="nohighlight">python3 ok -q g
python3 ok -q g_iter</code></pre>

<h3 class="question" id="q4">Question 4: Ping pong</h3>

<p>The ping-pong sequence counts up starting from 1 and is always either counting
up or counting down.  At element <code>k</code>, the direction switches if <code>k</code> is a
multiple of 7 or contains the digit 7.  The first 30 elements of the ping-pong
sequence are listed below, with direction swaps marked using brackets at the
7th, 14th, 17th, 21st, 27th, and 28th elements:</p>

<pre><code class="hljs json"><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> [<span class="hljs-number">7</span>] <span class="hljs-number">6</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span> [<span class="hljs-number">0</span>] <span class="hljs-number">1</span> <span class="hljs-number">2</span> [<span class="hljs-number">3</span>] <span class="hljs-number">2</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> [-<span class="hljs-number">1</span>] <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> [<span class="hljs-number">5</span>] [<span class="hljs-number">4</span>] <span class="hljs-number">5</span> <span class="hljs-number">6</span></code></pre>

<p>Implement a function <code>pingpong</code> that returns the nth element of the
ping-pong sequence. <em>Do not use any assignment statements; however, you
may use <code>def</code> statements</em>.</p>

<blockquote><p><em>Hint</em>: If you're stuck, try implementing <code>pingpong</code> first using
assignment and a <code>while</code> statement. Any name that changes value will become
an argument to a function in the recursive definition.</p></blockquote>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pingpong</span><span class="hljs-params">(n)</span>:</span>
    <span class="hljs-string">"""Return the nth element of the ping-pong sequence.

    &gt;&gt;&gt; pingpong(7)
    7
    &gt;&gt;&gt; pingpong(8)
    6
    &gt;&gt;&gt; pingpong(15)
    1
    &gt;&gt;&gt; pingpong(21)
    -1
    &gt;&gt;&gt; pingpong(22)
    0
    &gt;&gt;&gt; pingpong(30)
    6
    &gt;&gt;&gt; pingpong(68)
    2
    &gt;&gt;&gt; pingpong(69)
    1
    &gt;&gt;&gt; pingpong(70)
    0
    &gt;&gt;&gt; pingpong(71)
    1
    &gt;&gt;&gt; pingpong(72)
    0
    &gt;&gt;&gt; pingpong(100)
    2
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'pingpong', ['Assign', 'AugAssign'])
    True
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<p>You may use the function <code>has_seven</code>, which returns True if a number <code>k</code>
contains the digit 7 at least once.</p>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">has_seven</span><span class="hljs-params">(k)</span>:</span>
    <span class="hljs-string">"""Returns True if at least one of the digits of k is a 7, False otherwise.

    &gt;&gt;&gt; has_seven(3)
    False
    &gt;&gt;&gt; has_seven(7)
    True
    &gt;&gt;&gt; has_seven(2734)
    True
    &gt;&gt;&gt; has_seven(2634)
    False
    &gt;&gt;&gt; has_seven(734)
    True
    &gt;&gt;&gt; has_seven(7777)
    True
    """</span>
    <span class="hljs-keyword">if</span> k % <span class="hljs-number">10</span> == <span class="hljs-number">7</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span>
    <span class="hljs-keyword">elif</span> k &lt; <span class="hljs-number">10</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">False</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> has_seven(k // <span class="hljs-number">10</span>)</code></pre>

<p>Use OK to test your code:</p><pre><code class="nohighlight">python3 ok -q pingpong</code></pre>

<h3 class="question" id="q5">Question 5: Count change</h3>

<p>Once the machines take over, the denomination of every coin will be a
power of two: 1-cent, 2-cent, 4-cent, 8-cent, 16-cent, etc.  There will
be no limit to how much a coin can be worth.</p>

<p>A set of coins makes change for <code>n</code> if the sum of the values of the
coins is <code>n</code>.  For example, the following sets make change for <code>7</code>:</p>

<ul>
  <li>7 1-cent coins</li>
  <li>5 1-cent, 1 2-cent coins</li>
  <li>3 1-cent, 2 2-cent coins</li>
  <li>3 1-cent, 1 4-cent coins</li>
  <li>1 1-cent, 3 2-cent coins</li>
  <li>1 1-cent, 1 2-cent, 1 4-cent coins</li>
</ul>

<p>Thus, there are 6 ways to make change for <code>7</code>.  Write a function
<code>count_change</code> that takes a positive integer <code>n</code> and returns the number
of ways to make change for <code>n</code> using these coins of the future:</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">count_change</span><span class="hljs-params">(amount)</span>:</span>
    <span class="hljs-string">"""Return the number of ways to make change for amount.

    &gt;&gt;&gt; count_change(7)
    6
    &gt;&gt;&gt; count_change(10)
    14
    &gt;&gt;&gt; count_change(20)
    60
    &gt;&gt;&gt; count_change(100)
    9828
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<blockquote><p>Hint: you may find it helpful to refer to the
<a href="http://composingprograms.com/pages/17-recursive-functions.html#example-partitions">implementation</a>
of <code>count_partitions</code>.</p></blockquote>

<p>Use OK to test your code:</p><pre><code class="nohighlight">python3 ok -q count_change</code></pre>


<h2 id="extra-questions">Extra questions</h2>


<blockquote><p>Extra questions are not worth extra credit and are entirely optional. They are
designed to challenge you to think creatively!</p></blockquote>

<h3 class="question" id="q6">Question 6: Anonymous factorial</h3>

<p>The recursive factorial function can be written as a single expression
by using a <a href="http://docs.python.org/py3k/reference/expressions.html#conditional-expressions">conditional expression</a>.</p>

<pre><code class="hljs python"><span class="hljs-prompt">&gt;&gt;&gt; </span>fact = <span class="hljs-keyword">lambda</span> n: <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> mul(n, fact(sub(n, <span class="hljs-number">1</span>)))
<span class="hljs-prompt">&gt;&gt;&gt; </span>fact(<span class="hljs-number">5</span>)
<span class="hljs-number">120</span></code></pre>

<p>However, this implementation relies on the fact (no pun intended) that
<code>fact</code> has a name, to which we refer in the body of <code>fact</code>.  To write a
recursive function, we have always given it a name using a <code>def</code> or
assignment statement so that we can refer to the function within its
own body.  In this question, your job is to define fact recursively
without giving it a name!</p>

<p>Write an expression that computes <code>n</code> factorial using only call
expressions, conditional expressions, and lambda expressions (no
assignment or def statements).  <em>Note in particular that you are not
allowed to use <code>make_anonymous_factorial</code> in your return expression.</em>
The <code>sub</code> and <code>mul</code> functions from the <code>operator</code> module are the only
built-in functions required to solve this problem:</p>

<solution>

<pre><code class="hljs python"><span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> sub, mul

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_anonymous_factorial</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-string">"""Return the value of an expression that computes factorial.

    &gt;&gt;&gt; make_anonymous_factorial()(5)
    120
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'make_anonymous_factorial', ['Assign', 'AugAssign', 'FunctionDef', 'Recursion'])
    True
    """</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'YOUR_EXPRESSION_HERE'</span>
</code></pre>

</solution>

<p>Use OK to test your code:</p><pre><code class="nohighlight">python3 ok -q make_anonymous_factorial</code></pre>

  </div>

  <div class="col-md-3">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked">
  <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#vitamins">Vitamins</a></li>
  <ul class="nav nav-stacked">
    <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#q1">Question 1: Taxicab Distance</a></li>
    <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#q2">Question 2: Squares only</a></li>
  </ul>
  <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#required-questions">Required questions</a></li>
  <ul class="nav nav-stacked">
    <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#q3">Question 3: G function</a></li>
    <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#q4">Question 4: Ping pong</a></li>
    <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#q5">Question 5: Count change</a></li>
  </ul>
  <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#extra-questions">Extra questions</a></li>
  <ul class="nav nav-stacked">
    <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa16/hw/hw04/#q6">Question 6: Anonymous factorial</a></li>
  </ul>
</ul>
    </nav>
  </div>

</div>

    </div>
    

<script>
  $('.sidebar ul').addClass('nav nav-stacked');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>

  
</body></html>